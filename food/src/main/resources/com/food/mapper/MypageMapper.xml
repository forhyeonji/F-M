<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.food.mapper.MypageMapper">

	<select id="mypage" resultType="com.food.model.UserVO">
		select * from tb_user where user_id=#{user_id}
	</select>
	  
	<select id="mywrite" resultType="com.food.model.MypageVO">
		select * 
		from (
				select @rownum:= @rownum+1 rownum, co.*
				from tb_community co, (select @rownum:=0) as tmp					
				order by reg_dt desc
			 ) as mywrite
			 <![CDATA[
			 where rownum > (#{pageNum}-1)*#{amount} and rownum <= #{pageNum}*#{amount}
			 ]]>
	</select>
	
	<select id="total" resultType="int">
		select count(*) from tb_community 
		<if test="user_id != null and user_id !=''">
		where user_id=#{user_id}
		</if>		
	</select>
	
	<select id="mywritedetail" resultType="com.food.model.MypageVO">
		select * from tb_community where bno=#{bno}
	</select>
	
  
</mapper>